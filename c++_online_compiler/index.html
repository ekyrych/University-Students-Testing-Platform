<!DOCTYPE html>
<html>
<head>
	<title>test</title>
	<script src="jquery-3.3.1.min.js"></script>
	<script src="ace.js"></script>
	<style type="text/css" media="screen">
		#code{
			width: 100%;
			float: left;
			min-height: 100px;
			overflow: hidden;
		}
	</style>
</head>
<body>
<textarea id="code">
	
</textarea>
<button id="run" onclick="run();">Run</button>
<p>Output:</p><pre id="output">Waiting</pre>
</body>
<script type="text/javascript">
	var code;
	$(function(){
		code = ace.edit("code");
		code.setTheme("textmate");
		code.getSession().setMode("c_cpp");
		code.setShowPrintMargin(false);
		code.setOptions({
			maxLines:Infinity,
			fontSize:"12pt",
		});
		code.$blockScrolling=Infinity;
	})
	function run() {
		var cmd = "g++ -Wall main.cpp -o main_prog && echo 'Compilation: SUCCESS."+"Program output is:\n' && ./main_prog && echo \"\nExit code: $?\"";

		var output = $("#output");
		output.text('');
		var to_complite={ "src": code.getValue(),
		"cmd": cmd,};

		output.text("Executing... Please wait.");

		$.ajax({
			url: "http://coliru.stacked-crooked.com/compile",
			type: "POST",
			data: JSON.stringify(to_complite),
			contentType:"text/plain; charset=utf-8",
			dataType: "text"
		}).done(function(data){
			output.text(data);
		}).fail(function(data){
			output.text("Server error: "+ data);
		});
	};
</script>
</html>
